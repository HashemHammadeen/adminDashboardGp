<div class="sm:flex sm:items-center sm:justify-between mb-6">
  <div>
    <h1 class="text-2xl font-bold text-gray-900">Redemption History</h1>
    <p class="mt-2 text-sm text-gray-700">View all point redemptions at your shop.</p>
  </div>
  <div class="mt-4 sm:mt-0">
    <%= link_to 'Redeem Points', new_shop_admins_redemption_path, class: "inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-indigo-600 hover:bg-indigo-700" %>
  </div>
</div>

<div class="bg-white shadow overflow-hidden border-b border-gray-200 sm:rounded-lg">
  <table class="min-w-full divide-y divide-gray-200">
    <thead class="bg-gray-50">
      <tr>
        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">Date</th>
        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">Customer</th>
        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">Points</th>
        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">Value</th>
        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">Status</th>
        <th class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase">Code</th>
      </tr>
    </thead>
    <tbody class="bg-white divide-y divide-gray-200">
      <% @redemptions.each do |redemption| %>
        <tr>
          <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500"><%= redemption.created_at.strftime('%b %d, %Y %H:%M') %></td>
          <td class="px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900"><%= redemption.user.email %></td>
          <td class="px-6 py-4 whitespace-nowrap text-sm text-red-600 font-semibold">-<%= redemption.points_used %></td>
          <td class="px-6 py-4 whitespace-nowrap text-sm text-gray-500"><%= number_to_currency(redemption.discount_value) %></td>
          <td class="px-6 py-4 whitespace-nowrap">
            <span class="px-2 inline-flex text-xs font-semibold rounded-full <%= redemption.status == 'completed' ? 'bg-green-100 text-green-800' : 'bg-yellow-100 text-yellow-800' %>">
              <%= redemption.status.titleize %>
            </span>
          </td>
          <td class="px-6 py-4 whitespace-nowrap text-sm font-mono text-gray-500"><%= redemption.verification_code %></td>
        </tr>
      <% end %>
    </tbody>
  </table>
  
  <div class="bg-white px-4 py-3 border-t border-gray-200 sm:px-6">
    <%= paginate @redemptions if @redemptions.respond_to?(:total_pages) %>
  </div>
</div>
